-- MySQL Script generated by MySQL Workbench
-- Tue Dec 21 22:19:45 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema rent_cars
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema rent_cars
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `rent_cars` DEFAULT CHARACTER SET utf8 ;
USE `rent_cars` ;

-- -----------------------------------------------------
-- Table `rent_cars`.`account`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rent_cars`.`account` ;

CREATE TABLE IF NOT EXISTS `rent_cars`.`account` (
    `id` INT(6) NOT NULL AUTO_INCREMENT,
    `role_id` INT(1) NOT NULL,
    `name` VARCHAR(45) NULL,
    `surname` VARCHAR(45) NULL,
    `email` VARCHAR(100) NULL,
    `phone` VARCHAR(45) NULL,
    `document_id` VARCHAR(45) NULL,
    `address` VARCHAR(255) NULL,
    `drive_license_number` VARCHAR(45) NULL,
    `balance` DECIMAL(9,2) NULL,
    `status` INT(1) NULL,
    PRIMARY KEY (`id`),
    UNIQUE INDEX `email_UNIQUE` (`email` ASC) VISIBLE)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `rent_cars`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rent_cars`.`user` ;

CREATE TABLE IF NOT EXISTS `rent_cars`.`user` (
    `id` INT(6) NOT NULL AUTO_INCREMENT,
    `login` VARCHAR(50) NOT NULL,
    `password` VARCHAR(255) NOT NULL,
    `account_id` INT(6) NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `fk_account_users_idx` (`account_id` ASC) VISIBLE,
    UNIQUE INDEX `login_UNIQUE` (`login` ASC) VISIBLE,
    UNIQUE INDEX `account_id_UNIQUE` (`account_id` ASC) VISIBLE,
    CONSTRAINT `fk_account_users`
    FOREIGN KEY (`account_id`)
    REFERENCES `rent_cars`.`account` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
    ENGINE = InnoDB
    DEFAULT CHARACTER SET = ascii;


-- -----------------------------------------------------
-- Table `rent_cars`.`price`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rent_cars`.`price` ;

CREATE TABLE IF NOT EXISTS `rent_cars`.`price` (
    `id` INT(6) NOT NULL AUTO_INCREMENT,
    `price_per_day` DECIMAL(5,2) NULL,
    `price_per_hour` DECIMAL(5,2) NULL,
    PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `rent_cars`.`car`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rent_cars`.`car` ;

CREATE TABLE IF NOT EXISTS `rent_cars`.`car` (
    `id` INT(4) NOT NULL AUTO_INCREMENT,
    `brand` VARCHAR(45) NOT NULL,
    `model` VARCHAR(45) NOT NULL,
    `year` SMALLINT NOT NULL,
    `level` TINYINT NOT NULL,
    `body` TINYINT NOT NULL,
    `engine_volume` INT NOT NULL,
    `transmission` TINYINT NOT NULL,
    `doors` TINYINT NOT NULL,
    `color` VARCHAR(45) NOT NULL,
    `available` TINYINT NOT NULL,
    `price_id` INT(6) NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `fk_car_price1_idx` (`price_id` ASC) VISIBLE,
    CONSTRAINT `fk_car_price1`
    FOREIGN KEY (`price_id`)
    REFERENCES `rent_cars`.`price` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `rent_cars`.`mark`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rent_cars`.`mark` ;

CREATE TABLE IF NOT EXISTS `rent_cars`.`mark` (
    `id` INT(6) NOT NULL AUTO_INCREMENT,
    `description` TEXT NULL,
    PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `rent_cars`.`insurance`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rent_cars`.`insurance` ;

CREATE TABLE IF NOT EXISTS `rent_cars`.`insurance` (
    `id` INT(6) NOT NULL AUTO_INCREMENT,
    `type` TINYINT(1) NOT NULL,
    `number` VARCHAR(45) NOT NULL,
    `company` VARCHAR(45) NOT NULL,
    `amount` DECIMAL(9,2) NOT NULL,
    PRIMARY KEY (`id`))
    ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `rent_cars`.`order_tab`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `rent_cars`.`order_tab` ;

CREATE TABLE IF NOT EXISTS `rent_cars`.`order_tab` (
                                                       `id` INT NOT NULL AUTO_INCREMENT,
                                                       `status` TINYINT NULL,
                                                       `rental_time` INT NULL,
                                                       `payment_status` TINYINT NULL,
                                                       `rent_start_dtm` BIGINT NULL,
                                                       `rent_end_dtm` BIGINT NULL,
                                                       `start_level` INT(3) NULL,
    `end_level` INT(3) NULL,
    `refusal` VARCHAR(255) NULL,
    `pledge` DECIMAL(9,2) NULL,
    `current_sum` DECIMAL(9,2) NULL,
    `status_mark` TINYINT NULL,
    `user_id` INT(6) NOT NULL,
    `car_id` INT(4) NOT NULL,
    `mark_id` INT(6) NOT NULL,
    `insurance_id` INT(6) NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `fk_order_car1_idx` (`car_id` ASC) VISIBLE,
    INDEX `fk_order_mark1_idx` (`mark_id` ASC) VISIBLE,
    INDEX `fk_order_insurance1_idx` (`insurance_id` ASC) VISIBLE,
    INDEX `fk_order_user1_idx` (`user_id` ASC) VISIBLE,
    CONSTRAINT `fk_order_car1`
    FOREIGN KEY (`car_id`)
    REFERENCES `rent_cars`.`car` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_order_mark1`
    FOREIGN KEY (`mark_id`)
    REFERENCES `rent_cars`.`mark` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_order_insurance1`
    FOREIGN KEY (`insurance_id`)
    REFERENCES `rent_cars`.`insurance` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
    CONSTRAINT `fk_order_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `rent_cars`.`user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
    ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
